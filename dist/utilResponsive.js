"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.isBiggerThanLaptop = exports.isLaptopDevice = exports.isTabletDevice = exports.isMobileDevice = exports.getDeviceTypeInfo = exports.getWindowDimension = exports.IdMobileHeight = exports.IdDeviceBreakpointsByWidth = exports.DeviceWidthObject = void 0;
var DeviceWidthObject = {
  MobileSmall: {
    max: 320,
    min: 0
  },
  MobileMedium: {
    max: 375,
    min: 321
  },
  MobileLarge: {
    max: 767,
    min: 376
  },
  Tablet: {
    max: 991,
    min: 768
  },
  LaptopSmall: {
    max: 1024,
    min: 992
  },
  LaptopLarge: {
    max: 1440,
    min: 1025
  },
  LargerThanLaptop: {
    max: 2560,
    min: 1441
  },
  LargeScreenMax: {
    max: 999999,
    min: 2561
  }
};
exports.DeviceWidthObject = DeviceWidthObject;
var IdDeviceBreakpointsByWidth = {
  laptop_max: 1440,
  laptop_min: 992,
  tablet_min: 768,
  tablet_max: 991,
  mobile_max: 767,
  default_min: 768 // Unrecognized device

};
exports.IdDeviceBreakpointsByWidth = IdDeviceBreakpointsByWidth;
var IdMobileHeight = {
  mobileLandscape_min: 320,
  mobileLandscape_max: 425
};
exports.IdMobileHeight = IdMobileHeight;

var getWindowDimension = function getWindowDimension() {
  if (typeof window !== "undefined") {
    var width = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
    var height = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;
    return {
      width: width,
      height: height
    };
  } // we don't care if dimensions are zeroed, here is the server requesting dimensions at initial load


  return {
    width: 0,
    height: 0
  };
};

exports.getWindowDimension = getWindowDimension;

var getDeviceTypeInfo = function getDeviceTypeInfo() {
  var windowDimension = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getWindowDimension();
  var width = windowDimension.width,
      height = windowDimension.height;
  var buildDeviceDetails = {
    deviceType: "",
    deviceTypeVariant: "",
    orientation: "Portrait",
    width: width,
    height: height,
    isFallback: false
  }; //  Edge case

  var hasEdgeCase = handleExceptions(buildDeviceDetails, width, height);

  if (hasEdgeCase) {
    return hasEdgeCase;
  }

  if (height < width) {
    // Orientation is landscape
    buildDeviceDetails.orientation = "Landscape";

    if (height <= IdMobileHeight.mobileLandscape_max) {
      // Mobile (landscape)
      buildDeviceDetails.deviceType = "Mobile";

      for (var devc in DeviceWidthObject) {
        if (height <= DeviceWidthObject[devc].max && height >= DeviceWidthObject[devc].min) {
          buildDeviceDetails.deviceTypeVariant = devc;
          break;
        }
      }
    } else if (width <= IdDeviceBreakpointsByWidth.tablet_max && width >= IdDeviceBreakpointsByWidth.tablet_min) {
      // Tablet (landscape)
      buildDeviceDetails.deviceType = "Tablet";
      buildDeviceDetails.deviceTypeVariant = "Tablet";
    } else if (width <= IdDeviceBreakpointsByWidth.laptop_max && width >= IdDeviceBreakpointsByWidth.laptop_min) {
      // Laptop (landscape)
      buildDeviceDetails.deviceType = "Laptop";

      for (var _devc in DeviceWidthObject) {
        if (width <= DeviceWidthObject[_devc].max && width >= DeviceWidthObject[_devc].min) {
          buildDeviceDetails.deviceTypeVariant = _devc;
          break;
        }
      }
    } else if (width > IdDeviceBreakpointsByWidth.laptop_max) {
      // Larger than Laptop (landscape)
      buildDeviceDetails.deviceType = "LargerThanLaptop";

      for (var _devc2 in DeviceWidthObject) {
        if (width <= DeviceWidthObject[_devc2].max && width >= DeviceWidthObject[_devc2].min) {
          buildDeviceDetails.deviceTypeVariant = _devc2;
          break;
        }
      }
    } else {
      // TODO: UNKNOWN realm
      buildDeviceDetails.deviceType = "Mobile";
      buildDeviceDetails.deviceTypeVariant = "MobileLarge";
      buildDeviceDetails.isFallback = true;
    }

    return buildDeviceDetails;
  } else {
    // Orientation is portrait
    buildDeviceDetails.orientation = "Portrait";

    for (var _devc3 in DeviceWidthObject) {
      if (width <= DeviceWidthObject[_devc3].max && width >= DeviceWidthObject[_devc3].min) {
        buildDeviceDetails.deviceTypeVariant = _devc3;
        break;
      }
    }

    if (width <= IdDeviceBreakpointsByWidth.laptop_max && width >= IdDeviceBreakpointsByWidth.laptop_min) {
      buildDeviceDetails.deviceType = "Laptop";
    }

    if (width <= IdDeviceBreakpointsByWidth.tablet_max && width >= IdDeviceBreakpointsByWidth.tablet_min) {
      buildDeviceDetails.deviceType = "Tablet";
    }

    if (width <= IdDeviceBreakpointsByWidth.mobile_max) {
      buildDeviceDetails.deviceType = "Mobile";
    }

    if (width > IdDeviceBreakpointsByWidth.laptop_max) {
      buildDeviceDetails.deviceType = "LargerThanLaptop";
    }

    return buildDeviceDetails;
  }
};

exports.getDeviceTypeInfo = getDeviceTypeInfo;

var handleExceptions = function handleExceptions(buildDeviceDetails, width, height) {
  //  iPadPro
  if (width === 1024 && height === 1366) {
    buildDeviceDetails.deviceType = "Tablet";
    buildDeviceDetails.deviceTypeVariant = "iPadPro";
    buildDeviceDetails.orientation = "Portrait";
    return buildDeviceDetails;
  } else if (width === 1366 && height === 1024) {
    //  Edge case
    buildDeviceDetails.deviceType = "Tablet";
    buildDeviceDetails.deviceTypeVariant = "iPadPro";
    buildDeviceDetails.orientation = "Landscape";
    return buildDeviceDetails;
  }

  return undefined;
};

var isMobileDevice = function isMobileDevice() {
  var deviceInformation = getDeviceTypeInfo();
  return deviceInformation.deviceType === "Mobile";
};

exports.isMobileDevice = isMobileDevice;

var isTabletDevice = function isTabletDevice() {
  var deviceInformation = getDeviceTypeInfo();
  return deviceInformation.deviceType === "Tablet";
};

exports.isTabletDevice = isTabletDevice;

var isLaptopDevice = function isLaptopDevice() {
  var deviceInformation = getDeviceTypeInfo();
  return deviceInformation.deviceType === "Laptop";
};

exports.isLaptopDevice = isLaptopDevice;

var isBiggerThanLaptop = function isBiggerThanLaptop() {
  var deviceInformation = getDeviceTypeInfo();
  return deviceInformation.deviceType === "LargerThanLaptop";
};

exports.isBiggerThanLaptop = isBiggerThanLaptop;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy91dGlsUmVzcG9uc2l2ZS5qcyJdLCJuYW1lcyI6WyJEZXZpY2VXaWR0aE9iamVjdCIsIk1vYmlsZVNtYWxsIiwibWF4IiwibWluIiwiTW9iaWxlTWVkaXVtIiwiTW9iaWxlTGFyZ2UiLCJUYWJsZXQiLCJMYXB0b3BTbWFsbCIsIkxhcHRvcExhcmdlIiwiTGFyZ2VyVGhhbkxhcHRvcCIsIkxhcmdlU2NyZWVuTWF4IiwiSWREZXZpY2VCcmVha3BvaW50c0J5V2lkdGgiLCJsYXB0b3BfbWF4IiwibGFwdG9wX21pbiIsInRhYmxldF9taW4iLCJ0YWJsZXRfbWF4IiwibW9iaWxlX21heCIsImRlZmF1bHRfbWluIiwiSWRNb2JpbGVIZWlnaHQiLCJtb2JpbGVMYW5kc2NhcGVfbWluIiwibW9iaWxlTGFuZHNjYXBlX21heCIsImdldFdpbmRvd0RpbWVuc2lvbiIsIndpbmRvdyIsIndpZHRoIiwiaW5uZXJXaWR0aCIsImRvY3VtZW50IiwiZG9jdW1lbnRFbGVtZW50IiwiY2xpZW50V2lkdGgiLCJib2R5IiwiaGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJnZXREZXZpY2VUeXBlSW5mbyIsIndpbmRvd0RpbWVuc2lvbiIsImJ1aWxkRGV2aWNlRGV0YWlscyIsImRldmljZVR5cGUiLCJkZXZpY2VUeXBlVmFyaWFudCIsIm9yaWVudGF0aW9uIiwiaXNGYWxsYmFjayIsImhhc0VkZ2VDYXNlIiwiaGFuZGxlRXhjZXB0aW9ucyIsImRldmMiLCJ1bmRlZmluZWQiLCJpc01vYmlsZURldmljZSIsImRldmljZUluZm9ybWF0aW9uIiwiaXNUYWJsZXREZXZpY2UiLCJpc0xhcHRvcERldmljZSIsImlzQmlnZ2VyVGhhbkxhcHRvcCJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQU8sSUFBTUEsaUJBQWlCLEdBQUc7QUFDL0JDLEVBQUFBLFdBQVcsRUFBRTtBQUFFQyxJQUFBQSxHQUFHLEVBQUUsR0FBUDtBQUFZQyxJQUFBQSxHQUFHLEVBQUU7QUFBakIsR0FEa0I7QUFFL0JDLEVBQUFBLFlBQVksRUFBRTtBQUFFRixJQUFBQSxHQUFHLEVBQUUsR0FBUDtBQUFZQyxJQUFBQSxHQUFHLEVBQUU7QUFBakIsR0FGaUI7QUFHL0JFLEVBQUFBLFdBQVcsRUFBRTtBQUFFSCxJQUFBQSxHQUFHLEVBQUUsR0FBUDtBQUFZQyxJQUFBQSxHQUFHLEVBQUU7QUFBakIsR0FIa0I7QUFJL0JHLEVBQUFBLE1BQU0sRUFBRTtBQUFFSixJQUFBQSxHQUFHLEVBQUUsR0FBUDtBQUFZQyxJQUFBQSxHQUFHLEVBQUU7QUFBakIsR0FKdUI7QUFLL0JJLEVBQUFBLFdBQVcsRUFBRTtBQUFFTCxJQUFBQSxHQUFHLEVBQUUsSUFBUDtBQUFhQyxJQUFBQSxHQUFHLEVBQUU7QUFBbEIsR0FMa0I7QUFNL0JLLEVBQUFBLFdBQVcsRUFBRTtBQUFFTixJQUFBQSxHQUFHLEVBQUUsSUFBUDtBQUFhQyxJQUFBQSxHQUFHLEVBQUU7QUFBbEIsR0FOa0I7QUFPL0JNLEVBQUFBLGdCQUFnQixFQUFFO0FBQUVQLElBQUFBLEdBQUcsRUFBRSxJQUFQO0FBQWFDLElBQUFBLEdBQUcsRUFBRTtBQUFsQixHQVBhO0FBUS9CTyxFQUFBQSxjQUFjLEVBQUU7QUFBRVIsSUFBQUEsR0FBRyxFQUFFLE1BQVA7QUFBZUMsSUFBQUEsR0FBRyxFQUFFO0FBQXBCO0FBUmUsQ0FBMUI7O0FBV0EsSUFBTVEsMEJBQTBCLEdBQUc7QUFDeENDLEVBQUFBLFVBQVUsRUFBRSxJQUQ0QjtBQUV4Q0MsRUFBQUEsVUFBVSxFQUFFLEdBRjRCO0FBR3hDQyxFQUFBQSxVQUFVLEVBQUUsR0FINEI7QUFJeENDLEVBQUFBLFVBQVUsRUFBRSxHQUo0QjtBQUt4Q0MsRUFBQUEsVUFBVSxFQUFFLEdBTDRCO0FBTXhDQyxFQUFBQSxXQUFXLEVBQUUsR0FOMkIsQ0FNdkI7O0FBTnVCLENBQW5DOztBQVFBLElBQU1DLGNBQWMsR0FBRztBQUM1QkMsRUFBQUEsbUJBQW1CLEVBQUUsR0FETztBQUU1QkMsRUFBQUEsbUJBQW1CLEVBQUU7QUFGTyxDQUF2Qjs7O0FBS0EsSUFBTUMsa0JBQWtCLEdBQUcsU0FBckJBLGtCQUFxQixHQUFNO0FBQ3RDLE1BQUksT0FBT0MsTUFBUCxLQUFrQixXQUF0QixFQUFtQztBQUNqQyxRQUFNQyxLQUFLLEdBQ1RELE1BQU0sQ0FBQ0UsVUFBUCxJQUNBQyxRQUFRLENBQUNDLGVBQVQsQ0FBeUJDLFdBRHpCLElBRUFGLFFBQVEsQ0FBQ0csSUFBVCxDQUFjRCxXQUhoQjtBQUlBLFFBQU1FLE1BQU0sR0FDVlAsTUFBTSxDQUFDUSxXQUFQLElBQ0FMLFFBQVEsQ0FBQ0MsZUFBVCxDQUF5QkssWUFEekIsSUFFQU4sUUFBUSxDQUFDRyxJQUFULENBQWNHLFlBSGhCO0FBSUEsV0FBTztBQUFFUixNQUFBQSxLQUFLLEVBQUxBLEtBQUY7QUFBU00sTUFBQUEsTUFBTSxFQUFOQTtBQUFULEtBQVA7QUFDRCxHQVhxQyxDQVl0Qzs7O0FBQ0EsU0FBTztBQUNMTixJQUFBQSxLQUFLLEVBQUUsQ0FERjtBQUVMTSxJQUFBQSxNQUFNLEVBQUU7QUFGSCxHQUFQO0FBSUQsQ0FqQk07Ozs7QUFtQkEsSUFBTUcsaUJBQWlCLEdBQUcsU0FBcEJBLGlCQUFvQixHQUE0QztBQUFBLE1BQTNDQyxlQUEyQyx1RUFBekJaLGtCQUFrQixFQUFPO0FBQUEsTUFDbkVFLEtBRG1FLEdBQ2pEVSxlQURpRCxDQUNuRVYsS0FEbUU7QUFBQSxNQUM1RE0sTUFENEQsR0FDakRJLGVBRGlELENBQzVESixNQUQ0RDtBQUczRSxNQUFNSyxrQkFBa0IsR0FBRztBQUN6QkMsSUFBQUEsVUFBVSxFQUFFLEVBRGE7QUFFekJDLElBQUFBLGlCQUFpQixFQUFFLEVBRk07QUFHekJDLElBQUFBLFdBQVcsRUFBRSxVQUhZO0FBSXpCZCxJQUFBQSxLQUFLLEVBQUxBLEtBSnlCO0FBS3pCTSxJQUFBQSxNQUFNLEVBQU5BLE1BTHlCO0FBTXpCUyxJQUFBQSxVQUFVLEVBQUU7QUFOYSxHQUEzQixDQUgyRSxDQVkzRTs7QUFDQSxNQUFNQyxXQUFXLEdBQUdDLGdCQUFnQixDQUFDTixrQkFBRCxFQUFxQlgsS0FBckIsRUFBNEJNLE1BQTVCLENBQXBDOztBQUNBLE1BQUlVLFdBQUosRUFBaUI7QUFDZixXQUFPQSxXQUFQO0FBQ0Q7O0FBRUQsTUFBSVYsTUFBTSxHQUFHTixLQUFiLEVBQW9CO0FBQ2xCO0FBQ0FXLElBQUFBLGtCQUFrQixDQUFDRyxXQUFuQixHQUFpQyxXQUFqQzs7QUFDQSxRQUFJUixNQUFNLElBQUlYLGNBQWMsQ0FBQ0UsbUJBQTdCLEVBQWtEO0FBQ2hEO0FBQ0FjLE1BQUFBLGtCQUFrQixDQUFDQyxVQUFuQixHQUFnQyxRQUFoQzs7QUFFQSxXQUFLLElBQU1NLElBQVgsSUFBbUJ6QyxpQkFBbkIsRUFBc0M7QUFDcEMsWUFDRTZCLE1BQU0sSUFBSTdCLGlCQUFpQixDQUFDeUMsSUFBRCxDQUFqQixDQUF3QnZDLEdBQWxDLElBQ0EyQixNQUFNLElBQUk3QixpQkFBaUIsQ0FBQ3lDLElBQUQsQ0FBakIsQ0FBd0J0QyxHQUZwQyxFQUdFO0FBQ0ErQixVQUFBQSxrQkFBa0IsQ0FBQ0UsaUJBQW5CLEdBQXVDSyxJQUF2QztBQUNBO0FBQ0Q7QUFDRjtBQUNGLEtBYkQsTUFhTyxJQUNMbEIsS0FBSyxJQUFJWiwwQkFBMEIsQ0FBQ0ksVUFBcEMsSUFDQVEsS0FBSyxJQUFJWiwwQkFBMEIsQ0FBQ0csVUFGL0IsRUFHTDtBQUNBO0FBQ0FvQixNQUFBQSxrQkFBa0IsQ0FBQ0MsVUFBbkIsR0FBZ0MsUUFBaEM7QUFDQUQsTUFBQUEsa0JBQWtCLENBQUNFLGlCQUFuQixHQUF1QyxRQUF2QztBQUNELEtBUE0sTUFPQSxJQUNMYixLQUFLLElBQUlaLDBCQUEwQixDQUFDQyxVQUFwQyxJQUNBVyxLQUFLLElBQUlaLDBCQUEwQixDQUFDRSxVQUYvQixFQUdMO0FBQ0E7QUFDQXFCLE1BQUFBLGtCQUFrQixDQUFDQyxVQUFuQixHQUFnQyxRQUFoQzs7QUFDQSxXQUFLLElBQU1NLEtBQVgsSUFBbUJ6QyxpQkFBbkIsRUFBc0M7QUFDcEMsWUFDRXVCLEtBQUssSUFBSXZCLGlCQUFpQixDQUFDeUMsS0FBRCxDQUFqQixDQUF3QnZDLEdBQWpDLElBQ0FxQixLQUFLLElBQUl2QixpQkFBaUIsQ0FBQ3lDLEtBQUQsQ0FBakIsQ0FBd0J0QyxHQUZuQyxFQUdFO0FBQ0ErQixVQUFBQSxrQkFBa0IsQ0FBQ0UsaUJBQW5CLEdBQXVDSyxLQUF2QztBQUNBO0FBQ0Q7QUFDRjtBQUNGLEtBZk0sTUFlQSxJQUFJbEIsS0FBSyxHQUFHWiwwQkFBMEIsQ0FBQ0MsVUFBdkMsRUFBbUQ7QUFDeEQ7QUFDQXNCLE1BQUFBLGtCQUFrQixDQUFDQyxVQUFuQixHQUFnQyxrQkFBaEM7O0FBQ0EsV0FBSyxJQUFNTSxNQUFYLElBQW1CekMsaUJBQW5CLEVBQXNDO0FBQ3BDLFlBQ0V1QixLQUFLLElBQUl2QixpQkFBaUIsQ0FBQ3lDLE1BQUQsQ0FBakIsQ0FBd0J2QyxHQUFqQyxJQUNBcUIsS0FBSyxJQUFJdkIsaUJBQWlCLENBQUN5QyxNQUFELENBQWpCLENBQXdCdEMsR0FGbkMsRUFHRTtBQUNBK0IsVUFBQUEsa0JBQWtCLENBQUNFLGlCQUFuQixHQUF1Q0ssTUFBdkM7QUFDQTtBQUNEO0FBQ0Y7QUFDRixLQVpNLE1BWUE7QUFDTDtBQUNBUCxNQUFBQSxrQkFBa0IsQ0FBQ0MsVUFBbkIsR0FBZ0MsUUFBaEM7QUFDQUQsTUFBQUEsa0JBQWtCLENBQUNFLGlCQUFuQixHQUF1QyxhQUF2QztBQUNBRixNQUFBQSxrQkFBa0IsQ0FBQ0ksVUFBbkIsR0FBZ0MsSUFBaEM7QUFDRDs7QUFDRCxXQUFPSixrQkFBUDtBQUNELEdBekRELE1BeURPO0FBQ0w7QUFDQUEsSUFBQUEsa0JBQWtCLENBQUNHLFdBQW5CLEdBQWlDLFVBQWpDOztBQUNBLFNBQUssSUFBTUksTUFBWCxJQUFtQnpDLGlCQUFuQixFQUFzQztBQUNwQyxVQUNFdUIsS0FBSyxJQUFJdkIsaUJBQWlCLENBQUN5QyxNQUFELENBQWpCLENBQXdCdkMsR0FBakMsSUFDQXFCLEtBQUssSUFBSXZCLGlCQUFpQixDQUFDeUMsTUFBRCxDQUFqQixDQUF3QnRDLEdBRm5DLEVBR0U7QUFDQStCLFFBQUFBLGtCQUFrQixDQUFDRSxpQkFBbkIsR0FBdUNLLE1BQXZDO0FBQ0E7QUFDRDtBQUNGOztBQUNELFFBQ0VsQixLQUFLLElBQUlaLDBCQUEwQixDQUFDQyxVQUFwQyxJQUNBVyxLQUFLLElBQUlaLDBCQUEwQixDQUFDRSxVQUZ0QyxFQUdFO0FBQ0FxQixNQUFBQSxrQkFBa0IsQ0FBQ0MsVUFBbkIsR0FBZ0MsUUFBaEM7QUFDRDs7QUFDRCxRQUNFWixLQUFLLElBQUlaLDBCQUEwQixDQUFDSSxVQUFwQyxJQUNBUSxLQUFLLElBQUlaLDBCQUEwQixDQUFDRyxVQUZ0QyxFQUdFO0FBQ0FvQixNQUFBQSxrQkFBa0IsQ0FBQ0MsVUFBbkIsR0FBZ0MsUUFBaEM7QUFDRDs7QUFFRCxRQUFJWixLQUFLLElBQUlaLDBCQUEwQixDQUFDSyxVQUF4QyxFQUFvRDtBQUNsRGtCLE1BQUFBLGtCQUFrQixDQUFDQyxVQUFuQixHQUFnQyxRQUFoQztBQUNEOztBQUNELFFBQUlaLEtBQUssR0FBR1osMEJBQTBCLENBQUNDLFVBQXZDLEVBQW1EO0FBQ2pEc0IsTUFBQUEsa0JBQWtCLENBQUNDLFVBQW5CLEdBQWdDLGtCQUFoQztBQUNEOztBQUNELFdBQU9ELGtCQUFQO0FBQ0Q7QUFDRixDQTVHTTs7OztBQThHUCxJQUFNTSxnQkFBZ0IsR0FBRyxTQUFuQkEsZ0JBQW1CLENBQUNOLGtCQUFELEVBQXFCWCxLQUFyQixFQUE0Qk0sTUFBNUIsRUFBdUM7QUFDOUQ7QUFDQSxNQUFJTixLQUFLLEtBQUssSUFBVixJQUFrQk0sTUFBTSxLQUFLLElBQWpDLEVBQXVDO0FBQ3JDSyxJQUFBQSxrQkFBa0IsQ0FBQ0MsVUFBbkIsR0FBZ0MsUUFBaEM7QUFDQUQsSUFBQUEsa0JBQWtCLENBQUNFLGlCQUFuQixHQUF1QyxTQUF2QztBQUNBRixJQUFBQSxrQkFBa0IsQ0FBQ0csV0FBbkIsR0FBaUMsVUFBakM7QUFFQSxXQUFPSCxrQkFBUDtBQUNELEdBTkQsTUFNTyxJQUFJWCxLQUFLLEtBQUssSUFBVixJQUFrQk0sTUFBTSxLQUFLLElBQWpDLEVBQXVDO0FBQzVDO0FBQ0FLLElBQUFBLGtCQUFrQixDQUFDQyxVQUFuQixHQUFnQyxRQUFoQztBQUNBRCxJQUFBQSxrQkFBa0IsQ0FBQ0UsaUJBQW5CLEdBQXVDLFNBQXZDO0FBQ0FGLElBQUFBLGtCQUFrQixDQUFDRyxXQUFuQixHQUFpQyxXQUFqQztBQUNBLFdBQU9ILGtCQUFQO0FBQ0Q7O0FBRUQsU0FBT1EsU0FBUDtBQUNELENBakJEOztBQW1CTyxJQUFNQyxjQUFjLEdBQUcsU0FBakJBLGNBQWlCLEdBQU07QUFDbEMsTUFBTUMsaUJBQWlCLEdBQUdaLGlCQUFpQixFQUEzQztBQUNBLFNBQU9ZLGlCQUFpQixDQUFDVCxVQUFsQixLQUFpQyxRQUF4QztBQUNELENBSE07Ozs7QUFLQSxJQUFNVSxjQUFjLEdBQUcsU0FBakJBLGNBQWlCLEdBQU07QUFDbEMsTUFBTUQsaUJBQWlCLEdBQUdaLGlCQUFpQixFQUEzQztBQUVBLFNBQU9ZLGlCQUFpQixDQUFDVCxVQUFsQixLQUFpQyxRQUF4QztBQUNELENBSk07Ozs7QUFNQSxJQUFNVyxjQUFjLEdBQUcsU0FBakJBLGNBQWlCLEdBQU07QUFDbEMsTUFBTUYsaUJBQWlCLEdBQUdaLGlCQUFpQixFQUEzQztBQUVBLFNBQU9ZLGlCQUFpQixDQUFDVCxVQUFsQixLQUFpQyxRQUF4QztBQUNELENBSk07Ozs7QUFNQSxJQUFNWSxrQkFBa0IsR0FBRyxTQUFyQkEsa0JBQXFCLEdBQU07QUFDdEMsTUFBTUgsaUJBQWlCLEdBQUdaLGlCQUFpQixFQUEzQztBQUVBLFNBQU9ZLGlCQUFpQixDQUFDVCxVQUFsQixLQUFpQyxrQkFBeEM7QUFDRCxDQUpNIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IERldmljZVdpZHRoT2JqZWN0ID0ge1xuICBNb2JpbGVTbWFsbDogeyBtYXg6IDMyMCwgbWluOiAwIH0sXG4gIE1vYmlsZU1lZGl1bTogeyBtYXg6IDM3NSwgbWluOiAzMjEgfSxcbiAgTW9iaWxlTGFyZ2U6IHsgbWF4OiA3NjcsIG1pbjogMzc2IH0sXG4gIFRhYmxldDogeyBtYXg6IDk5MSwgbWluOiA3NjggfSxcbiAgTGFwdG9wU21hbGw6IHsgbWF4OiAxMDI0LCBtaW46IDk5MiB9LFxuICBMYXB0b3BMYXJnZTogeyBtYXg6IDE0NDAsIG1pbjogMTAyNSB9LFxuICBMYXJnZXJUaGFuTGFwdG9wOiB7IG1heDogMjU2MCwgbWluOiAxNDQxIH0sXG4gIExhcmdlU2NyZWVuTWF4OiB7IG1heDogOTk5OTk5LCBtaW46IDI1NjEgfVxufTtcblxuZXhwb3J0IGNvbnN0IElkRGV2aWNlQnJlYWtwb2ludHNCeVdpZHRoID0ge1xuICBsYXB0b3BfbWF4OiAxNDQwLFxuICBsYXB0b3BfbWluOiA5OTIsXG4gIHRhYmxldF9taW46IDc2OCxcbiAgdGFibGV0X21heDogOTkxLFxuICBtb2JpbGVfbWF4OiA3NjcsXG4gIGRlZmF1bHRfbWluOiA3NjggLy8gVW5yZWNvZ25pemVkIGRldmljZVxufTtcbmV4cG9ydCBjb25zdCBJZE1vYmlsZUhlaWdodCA9IHtcbiAgbW9iaWxlTGFuZHNjYXBlX21pbjogMzIwLFxuICBtb2JpbGVMYW5kc2NhcGVfbWF4OiA0MjVcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRXaW5kb3dEaW1lbnNpb24gPSAoKSA9PiB7XG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgY29uc3Qgd2lkdGggPVxuICAgICAgd2luZG93LmlubmVyV2lkdGggfHxcbiAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCB8fFxuICAgICAgZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aDtcbiAgICBjb25zdCBoZWlnaHQgPVxuICAgICAgd2luZG93LmlubmVySGVpZ2h0IHx8XG4gICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0IHx8XG4gICAgICBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodDtcbiAgICByZXR1cm4geyB3aWR0aCwgaGVpZ2h0IH07XG4gIH1cbiAgLy8gd2UgZG9uJ3QgY2FyZSBpZiBkaW1lbnNpb25zIGFyZSB6ZXJvZWQsIGhlcmUgaXMgdGhlIHNlcnZlciByZXF1ZXN0aW5nIGRpbWVuc2lvbnMgYXQgaW5pdGlhbCBsb2FkXG4gIHJldHVybiB7XG4gICAgd2lkdGg6IDAsXG4gICAgaGVpZ2h0OiAwXG4gIH07XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0RGV2aWNlVHlwZUluZm8gPSAod2luZG93RGltZW5zaW9uID0gZ2V0V2luZG93RGltZW5zaW9uKCkpID0+IHtcbiAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSB3aW5kb3dEaW1lbnNpb247XG5cbiAgY29uc3QgYnVpbGREZXZpY2VEZXRhaWxzID0ge1xuICAgIGRldmljZVR5cGU6IFwiXCIsXG4gICAgZGV2aWNlVHlwZVZhcmlhbnQ6IFwiXCIsXG4gICAgb3JpZW50YXRpb246IFwiUG9ydHJhaXRcIixcbiAgICB3aWR0aCxcbiAgICBoZWlnaHQsXG4gICAgaXNGYWxsYmFjazogZmFsc2VcbiAgfTtcblxuICAvLyAgRWRnZSBjYXNlXG4gIGNvbnN0IGhhc0VkZ2VDYXNlID0gaGFuZGxlRXhjZXB0aW9ucyhidWlsZERldmljZURldGFpbHMsIHdpZHRoLCBoZWlnaHQpO1xuICBpZiAoaGFzRWRnZUNhc2UpIHtcbiAgICByZXR1cm4gaGFzRWRnZUNhc2U7XG4gIH1cblxuICBpZiAoaGVpZ2h0IDwgd2lkdGgpIHtcbiAgICAvLyBPcmllbnRhdGlvbiBpcyBsYW5kc2NhcGVcbiAgICBidWlsZERldmljZURldGFpbHMub3JpZW50YXRpb24gPSBcIkxhbmRzY2FwZVwiO1xuICAgIGlmIChoZWlnaHQgPD0gSWRNb2JpbGVIZWlnaHQubW9iaWxlTGFuZHNjYXBlX21heCkge1xuICAgICAgLy8gTW9iaWxlIChsYW5kc2NhcGUpXG4gICAgICBidWlsZERldmljZURldGFpbHMuZGV2aWNlVHlwZSA9IFwiTW9iaWxlXCI7XG5cbiAgICAgIGZvciAoY29uc3QgZGV2YyBpbiBEZXZpY2VXaWR0aE9iamVjdCkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgaGVpZ2h0IDw9IERldmljZVdpZHRoT2JqZWN0W2RldmNdLm1heCAmJlxuICAgICAgICAgIGhlaWdodCA+PSBEZXZpY2VXaWR0aE9iamVjdFtkZXZjXS5taW5cbiAgICAgICAgKSB7XG4gICAgICAgICAgYnVpbGREZXZpY2VEZXRhaWxzLmRldmljZVR5cGVWYXJpYW50ID0gZGV2YztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoXG4gICAgICB3aWR0aCA8PSBJZERldmljZUJyZWFrcG9pbnRzQnlXaWR0aC50YWJsZXRfbWF4ICYmXG4gICAgICB3aWR0aCA+PSBJZERldmljZUJyZWFrcG9pbnRzQnlXaWR0aC50YWJsZXRfbWluXG4gICAgKSB7XG4gICAgICAvLyBUYWJsZXQgKGxhbmRzY2FwZSlcbiAgICAgIGJ1aWxkRGV2aWNlRGV0YWlscy5kZXZpY2VUeXBlID0gXCJUYWJsZXRcIjtcbiAgICAgIGJ1aWxkRGV2aWNlRGV0YWlscy5kZXZpY2VUeXBlVmFyaWFudCA9IFwiVGFibGV0XCI7XG4gICAgfSBlbHNlIGlmIChcbiAgICAgIHdpZHRoIDw9IElkRGV2aWNlQnJlYWtwb2ludHNCeVdpZHRoLmxhcHRvcF9tYXggJiZcbiAgICAgIHdpZHRoID49IElkRGV2aWNlQnJlYWtwb2ludHNCeVdpZHRoLmxhcHRvcF9taW5cbiAgICApIHtcbiAgICAgIC8vIExhcHRvcCAobGFuZHNjYXBlKVxuICAgICAgYnVpbGREZXZpY2VEZXRhaWxzLmRldmljZVR5cGUgPSBcIkxhcHRvcFwiO1xuICAgICAgZm9yIChjb25zdCBkZXZjIGluIERldmljZVdpZHRoT2JqZWN0KSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICB3aWR0aCA8PSBEZXZpY2VXaWR0aE9iamVjdFtkZXZjXS5tYXggJiZcbiAgICAgICAgICB3aWR0aCA+PSBEZXZpY2VXaWR0aE9iamVjdFtkZXZjXS5taW5cbiAgICAgICAgKSB7XG4gICAgICAgICAgYnVpbGREZXZpY2VEZXRhaWxzLmRldmljZVR5cGVWYXJpYW50ID0gZGV2YztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAod2lkdGggPiBJZERldmljZUJyZWFrcG9pbnRzQnlXaWR0aC5sYXB0b3BfbWF4KSB7XG4gICAgICAvLyBMYXJnZXIgdGhhbiBMYXB0b3AgKGxhbmRzY2FwZSlcbiAgICAgIGJ1aWxkRGV2aWNlRGV0YWlscy5kZXZpY2VUeXBlID0gXCJMYXJnZXJUaGFuTGFwdG9wXCI7XG4gICAgICBmb3IgKGNvbnN0IGRldmMgaW4gRGV2aWNlV2lkdGhPYmplY3QpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHdpZHRoIDw9IERldmljZVdpZHRoT2JqZWN0W2RldmNdLm1heCAmJlxuICAgICAgICAgIHdpZHRoID49IERldmljZVdpZHRoT2JqZWN0W2RldmNdLm1pblxuICAgICAgICApIHtcbiAgICAgICAgICBidWlsZERldmljZURldGFpbHMuZGV2aWNlVHlwZVZhcmlhbnQgPSBkZXZjO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFRPRE86IFVOS05PV04gcmVhbG1cbiAgICAgIGJ1aWxkRGV2aWNlRGV0YWlscy5kZXZpY2VUeXBlID0gXCJNb2JpbGVcIjtcbiAgICAgIGJ1aWxkRGV2aWNlRGV0YWlscy5kZXZpY2VUeXBlVmFyaWFudCA9IFwiTW9iaWxlTGFyZ2VcIjtcbiAgICAgIGJ1aWxkRGV2aWNlRGV0YWlscy5pc0ZhbGxiYWNrID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGJ1aWxkRGV2aWNlRGV0YWlscztcbiAgfSBlbHNlIHtcbiAgICAvLyBPcmllbnRhdGlvbiBpcyBwb3J0cmFpdFxuICAgIGJ1aWxkRGV2aWNlRGV0YWlscy5vcmllbnRhdGlvbiA9IFwiUG9ydHJhaXRcIjtcbiAgICBmb3IgKGNvbnN0IGRldmMgaW4gRGV2aWNlV2lkdGhPYmplY3QpIHtcbiAgICAgIGlmIChcbiAgICAgICAgd2lkdGggPD0gRGV2aWNlV2lkdGhPYmplY3RbZGV2Y10ubWF4ICYmXG4gICAgICAgIHdpZHRoID49IERldmljZVdpZHRoT2JqZWN0W2RldmNdLm1pblxuICAgICAgKSB7XG4gICAgICAgIGJ1aWxkRGV2aWNlRGV0YWlscy5kZXZpY2VUeXBlVmFyaWFudCA9IGRldmM7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoXG4gICAgICB3aWR0aCA8PSBJZERldmljZUJyZWFrcG9pbnRzQnlXaWR0aC5sYXB0b3BfbWF4ICYmXG4gICAgICB3aWR0aCA+PSBJZERldmljZUJyZWFrcG9pbnRzQnlXaWR0aC5sYXB0b3BfbWluXG4gICAgKSB7XG4gICAgICBidWlsZERldmljZURldGFpbHMuZGV2aWNlVHlwZSA9IFwiTGFwdG9wXCI7XG4gICAgfVxuICAgIGlmIChcbiAgICAgIHdpZHRoIDw9IElkRGV2aWNlQnJlYWtwb2ludHNCeVdpZHRoLnRhYmxldF9tYXggJiZcbiAgICAgIHdpZHRoID49IElkRGV2aWNlQnJlYWtwb2ludHNCeVdpZHRoLnRhYmxldF9taW5cbiAgICApIHtcbiAgICAgIGJ1aWxkRGV2aWNlRGV0YWlscy5kZXZpY2VUeXBlID0gXCJUYWJsZXRcIjtcbiAgICB9XG5cbiAgICBpZiAod2lkdGggPD0gSWREZXZpY2VCcmVha3BvaW50c0J5V2lkdGgubW9iaWxlX21heCkge1xuICAgICAgYnVpbGREZXZpY2VEZXRhaWxzLmRldmljZVR5cGUgPSBcIk1vYmlsZVwiO1xuICAgIH1cbiAgICBpZiAod2lkdGggPiBJZERldmljZUJyZWFrcG9pbnRzQnlXaWR0aC5sYXB0b3BfbWF4KSB7XG4gICAgICBidWlsZERldmljZURldGFpbHMuZGV2aWNlVHlwZSA9IFwiTGFyZ2VyVGhhbkxhcHRvcFwiO1xuICAgIH1cbiAgICByZXR1cm4gYnVpbGREZXZpY2VEZXRhaWxzO1xuICB9XG59O1xuXG5jb25zdCBoYW5kbGVFeGNlcHRpb25zID0gKGJ1aWxkRGV2aWNlRGV0YWlscywgd2lkdGgsIGhlaWdodCkgPT4ge1xuICAvLyAgaVBhZFByb1xuICBpZiAod2lkdGggPT09IDEwMjQgJiYgaGVpZ2h0ID09PSAxMzY2KSB7XG4gICAgYnVpbGREZXZpY2VEZXRhaWxzLmRldmljZVR5cGUgPSBcIlRhYmxldFwiO1xuICAgIGJ1aWxkRGV2aWNlRGV0YWlscy5kZXZpY2VUeXBlVmFyaWFudCA9IFwiaVBhZFByb1wiO1xuICAgIGJ1aWxkRGV2aWNlRGV0YWlscy5vcmllbnRhdGlvbiA9IFwiUG9ydHJhaXRcIjtcblxuICAgIHJldHVybiBidWlsZERldmljZURldGFpbHM7XG4gIH0gZWxzZSBpZiAod2lkdGggPT09IDEzNjYgJiYgaGVpZ2h0ID09PSAxMDI0KSB7XG4gICAgLy8gIEVkZ2UgY2FzZVxuICAgIGJ1aWxkRGV2aWNlRGV0YWlscy5kZXZpY2VUeXBlID0gXCJUYWJsZXRcIjtcbiAgICBidWlsZERldmljZURldGFpbHMuZGV2aWNlVHlwZVZhcmlhbnQgPSBcImlQYWRQcm9cIjtcbiAgICBidWlsZERldmljZURldGFpbHMub3JpZW50YXRpb24gPSBcIkxhbmRzY2FwZVwiO1xuICAgIHJldHVybiBidWlsZERldmljZURldGFpbHM7XG4gIH1cblxuICByZXR1cm4gdW5kZWZpbmVkO1xufTtcblxuZXhwb3J0IGNvbnN0IGlzTW9iaWxlRGV2aWNlID0gKCkgPT4ge1xuICBjb25zdCBkZXZpY2VJbmZvcm1hdGlvbiA9IGdldERldmljZVR5cGVJbmZvKCk7XG4gIHJldHVybiBkZXZpY2VJbmZvcm1hdGlvbi5kZXZpY2VUeXBlID09PSBcIk1vYmlsZVwiO1xufTtcblxuZXhwb3J0IGNvbnN0IGlzVGFibGV0RGV2aWNlID0gKCkgPT4ge1xuICBjb25zdCBkZXZpY2VJbmZvcm1hdGlvbiA9IGdldERldmljZVR5cGVJbmZvKCk7XG5cbiAgcmV0dXJuIGRldmljZUluZm9ybWF0aW9uLmRldmljZVR5cGUgPT09IFwiVGFibGV0XCI7XG59O1xuXG5leHBvcnQgY29uc3QgaXNMYXB0b3BEZXZpY2UgPSAoKSA9PiB7XG4gIGNvbnN0IGRldmljZUluZm9ybWF0aW9uID0gZ2V0RGV2aWNlVHlwZUluZm8oKTtcblxuICByZXR1cm4gZGV2aWNlSW5mb3JtYXRpb24uZGV2aWNlVHlwZSA9PT0gXCJMYXB0b3BcIjtcbn07XG5cbmV4cG9ydCBjb25zdCBpc0JpZ2dlclRoYW5MYXB0b3AgPSAoKSA9PiB7XG4gIGNvbnN0IGRldmljZUluZm9ybWF0aW9uID0gZ2V0RGV2aWNlVHlwZUluZm8oKTtcblxuICByZXR1cm4gZGV2aWNlSW5mb3JtYXRpb24uZGV2aWNlVHlwZSA9PT0gXCJMYXJnZXJUaGFuTGFwdG9wXCI7XG59O1xuIl19